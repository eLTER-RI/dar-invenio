plugins:
  builder:
    disable:
    - script_sample_data
    - invenio_record_metadata_alembic_setup_cfg
  packages:
  - oarepo-model-builder-vocabularies
  - oarepo-model-builder-drafts
  - oarepo-model-builder-relations
  - oarepo-model-builder-cf
  - oarepo-model-builder-ui
  - oarepo-model-builder-requests
  - oarepo-model-builder-files
  - oarepo-model-builder-communities
  - oarepo-model-builder-drafts-files

profiles:
- record
- draft
- files
- draft_files

record:
  draft: {}

  module:
    qualified: lter
  permissions:
    presets:
      - community-workflow
  pid:
    type: lter
  properties:
    metadata:
      use: ./lter-metadata.yaml#LTERMetadata
    external_workflow:
      properties:
        id:
          type: keyword
          label.en: ID of the external workflow
          marshmallow:
            read: true
            write: false
        status:
          type: keyword
          label.en: Status of the execution of external workflow
          enum: [running, finished, failed]
          marshmallow:
            read: true
            write: false

  # system fields
  record:
    service-config:
      "extend:components":
        - shared.services.components.lter_component.LterComponent
    service:
      base-classes:
        - shared.services.records.service.LterBaseRecordService
    fields:
      external_workflow: "{{invenio_records.systemfields.dict.DictField}}()"

  resource-config:
    base-html-url: /lter/
  use:
  - invenio
  - ./lter-custom_fields.yaml
  - ./lter-facets.yaml

  search-options:
    base-classes:
      - oarepo_runtime.services.search.I18nSearchOptions


  # files
  draft-files:
    resource:
      base-classes: [ oarepo_ui.resources.file_resource.S3RedirectFileResource ]
    service-config:
      base-classes:
        - shared.services.files.config.ELterServiceConfig


  files:
    resource:
      base-classes: [ oarepo_ui.resources.file_resource.S3RedirectFileResource ]
    properties: {}
    service-config:
      base-classes:
        - shared.services.files.config.ELterServiceConfig


runtime-dependencies:
  oarepo-published-service: 1.0.2

settings:
  i18n-languages:
  - en

use: ["./settings.yaml"]